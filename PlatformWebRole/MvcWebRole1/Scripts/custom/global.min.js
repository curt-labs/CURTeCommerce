var master_mount,master_year,master_make,master_model,master_style=0,year,make,model,style=0,animate_logo=!0,urlAddress="https://www.hitchdepotusa.com/",pageName="Trailer Hitches",modelClosingAction=null,cartRendering,cartHovered=!1,cartItems=[],validateForm,closeError,resetLookup,displayError,displayMessage,addFavorite,showThanks,changeTab,populateCart,showCart,updateCart,hideCart,cartTimer,startCartTimer,prepareCart,toTitleCase,showLoader,CartItem,getTimestamp;$(function(){var n,t,i,r,u;$("body").append('<div id="cartbox"><\/div>'),$("#cartbox").css({left:$("#cartlink").offset().left+"px",top:$("#cartlink").parent().parent().position().top+$("#cartlink").outerHeight()+"px"}),CartItem=function(n,t,i,r,u){this.partID=n,this.shortDesc=r,this.qty=t,this.price=i,this.loaded=u},validateForm=function(n){var t=0;return($.each($(n).find("input[required],textarea[required],select[required]"),function(){var n=$(this).attr("id");$(this).val()==0||$(this).val().length==0?($(this).addClass("err"),$(this).closest("label").find("span.required-helper").length===0&&$(this).before('<span class="required-helper">'+$(this).attr("title")+"<\/span>"),t++):($(this).removeClass("err"),this.nodeName.toLowerCase()==="select"&&$(this).parent(".shadow").removeClass("err-shadow"),$(this).closest("label").find("span.required-helper").remove())}),t>0)?!1:!0},closeError=function(){$(".error_display").hide()},resetLookup=function(){$("#master_lookup label[for=year]").hide(),$("#master_lookup label[for=make]").hide(),$("#master_lookup label[for=model]").hide(),$("#master_lookup label[for=style]").hide(),$("#master_lookup label[for=mount]").show(),$("#master_lookup #mount").val(0).removeAttr("disabled"),$("#master_lookup #year").html('<option value="0">- Select Year -<\/option>').attr("disabled","disabled"),$("#master_lookup #make").html('<option value="0">- Select Make -<\/option>').attr("disabled","disabled"),$("#master_lookup #model").html('<option value="0">- Select Model -<\/option>').attr("disabled","disabled"),$("#master_lookup #style").html('<option value="0">- Select Style -<\/option>').attr("disabled","disabled"),$("#master_lookup label span").hide(),$("#master_lookup label select").removeClass("err")},displayError=function(n){$(".error_display").find(".err").html(n),$(".error_display").fadeIn(),setTimeout(closeError(),5e3)},displayMessage=function(n){displayError(n)},addFavorite=function(){if(window.sidebar)window.sidebar.addPanel(pageName,urlAddress,"");else if(window.external&&$.browser.webkit!=!0)window.external.AddFavorite(urlAddress,pageName);else{if(window.opera&&window.print){var n=document.createElement("a");return $(n).attr("href",urlAddress),$(n).setAttribute("title",pageName),$(n).setAttribute("rel","sidebar"),$(n).click(),!1}displayMessage("Don't forget to bookmark us! (Ctrl+D)")}},showThanks=function(){$.modal('<span class="modalThanks">Thank you for sharing!<\/span>',{containerCss:{backgroundColor:"#ffffff",borderColor:"#ffffff",height:"100px",width:"400px",padding:"10px"}}),setTimeout("$.modal.close()",5e3)},changeTab=function(n){var t,i,r;n.length>0?(t=$("#"+n).get()[0],t!=undefined&&t!=null?(i=$("a[href=#"+n+"]").parent().parent().find("a.active"),r=i.length>0?$(i).attr("href"):"",$(i).removeClass("active"),$("a[href=#"+n+"]").addClass("active"),$(t).parent().find("div.tab_content"+(r!=""?r:"")).fadeOut(400,function(){$(this).removeClass("active"),$(t).fadeIn(400,function(){$(t).addClass("active")})})):($("div.tab_container div.tab_content:first").show(),$("ul.tabs").not("ul.nojs").find("li:first a").addClass("active"),$("div.part_container").get()!==undefined&&$("div.part_container").get().length>0&&($("div.part_tab_container li:first a").addClass("active"),$("div.part_container div.part_content:first").show()))):(n=$("ul.tabs li a:first").attr("href"),n!==undefined&&n.indexOf("#")>-1?changeTab(n.replace("#","")):$("div.tab_container div.tab_content:first").show())},prepareCart=function(){cartRendering||($("#cartbox").empty(),$("#cartbox").append('<img id="cartloader" src="/Content/img/ajax-loader.gif" alt="loading..." />'))},populateCart=function(){$.getJSON("/Cart/getCart",{ts:getTimestamp()},function(n){cartItems=[],$(n.CartItems).each(function(n,t){var i=t.quantity*Number(t.price);cartItems.push(new CartItem(t.partID,t.quantity,i,t.shortDesc,!0))}),updateCart()})},showCart=function(){$("#cartbox").css({left:$("#cartlink").offset().left+"px",top:$("#cartlink").parent().parent().position().top+$("#cartlink").outerHeight()+"px"}),clearTimeout(cartTimer),$("#cartbox").stop(!0).fadeTo("fast",1)},updateCart=function(){if($("#cartbox").empty(),cartItems.length>0){var n="<table><thead><tr><th>Part<\/th><th>Qty<\/th><th>Price<\/th><\/tr><\/thead><tbody>",t=0,i=0;$(cartItems).each(function(r,u){t+=u.price,i+=u.qty,n+='<tr><td class="'+(u.loaded?"loaded":"notloaded")+'"><a href="/Part/'+u.partID+'">'+u.shortDesc+'<\/a><\/td><td class="qty">'+u.qty+'<\/td><td class="price">$'+u.price.toFixed(2)+"<\/td>",n+=u.loaded?'<td><a href="/Cart/Remove/'+u.partID+'" data-id="'+u.partID+'" class="remove">&times;<\/a><\/td><\/tr>':'<td><img src="/Content/img/ajax-loader-small.gif" alt="adding to cart..." /><\/td><\/tr>'}),n+='<\/tbody><tfoot><td colspan="2">Subtotal:<\/td><td class="price">$'+t.toFixed(2)+"<\/td><td><\/td><\/tfoot><\/table>",n+='<a href="/Cart" class="button">View Cart & Checkout<\/a>',$("#cartCount").html(i),$("#cartbox").append(n)}else $("#cartCount").html(0),$("#cartbox").append("<p>There are no items in your cart. You should add something.<\/p>")},startCartTimer=function(n){n==undefined&&(n=3e3),clearTimeout(cartTimer),cartTimer=setTimeout(hideCart,n)},hideCart=function(){cartHovered||$("#cartbox").fadeOut(1500)},toTitleCase=function(n){return n.replace(/\w\S*/g,function(n){return n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()})},showLoader=function(n){var t='<div style="width:100%;text-align:center;margin-top:100px;">';t+='<img src="/Content/img/large-loader.gif" alt="Loading..." style="width:140px" />',t+='<span style="font-size: 24px;display:block;margin-top:25px">'+n+"<\/span>",t+="<\/div>",$.modal(t,{containerId:"simplemodal-loader",containerCss:{backgroundColor:"#ffffff",height:"400px",width:"800px",padding:"10px"},onClose:function(n){n.data.fadeOut("400",function(){n.container.hide("400",function(){n.overlay.slideUp("fase",function(){$.modal.close()})})})}})},$.browser.msie&&(($.browser.version<9||document.documentMode<9)&&$("#master_lookup #style").focus(function(){$(this).data("origWidth",$(this).width()).css("width","auto")}).blur(function(){$(this).css("width",$(this).data("origWidth"))}),($.browser.version<8||document.documentMode<8)&&($("header").css("height","130px").css("margin-bottom","0px").css("margin-top","90px"),$("header").find(".sub_bar").css("z-index","15000").find(".logo").show(),$("#top_bar").css("position","absolute"),$("#scroll_logo").css("visibility","hidden"),$("#cartbox").css("position","absolute"),animate_logo=!1,$("select").each(function(){n=$(this),n.data("origWidth",n.outerWidth())}).mouseenter(function(){$(this).css("width","auto"),$(this).parent("label").css("overflow","hidden")}).bind("blur change",function(){n=$(this),n.css("width",n.data("origWidth"))}))),animate_logo&&($("header").find(".logo").show(),$(window).width()<1020?$("#top_bar").css("position","absolute"):$("#top_bar").css("position","fixed"),$("#scroll_logo").css("display","none"),$(window).scroll(function(){var n=$(this).scrollTop();n>80?($("#scroll_logo").fadeIn("fast"),$("header").find(".logo").fadeOut()):($("#scroll_logo").fadeOut(),$("header").find(".logo").fadeIn("fast"))}),$(window).resize(function(){$(window).width()<1020?$("#top_bar").css("position","absolute"):$("#top_bar").css("position","fixed")})),Modernizr.input.placeholder||($(this).find("[placeholder]").each(function(){$(this).val()==""&&$(this).val($(this).attr("placeholder"))}),$("[placeholder]").focus(function(){$(this).val()==$(this).attr("placeholder")&&($(this).val(""),$(this).removeClass("placeholder"))}).blur(function(){($(this).val()==""||$(this).val()==$(this).attr("placeholder"))&&($(this).val($(this).attr("placeholder")),$(this).addClass("placeholder"))}),$("[placeholder]").closest("form").submit(function(){$(this).find("[placeholder]").each(function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")})})),$("#master_lookup #reset_lookup").click(function(){resetLookup()}),$("#master_lookup select").attr("disabled","disabled"),$("#master_lookup select:first").removeAttr("disabled"),$("#master_lookup #mount").change(function(){$("#master_lookup label img").css("display","none"),master_year=master_make=master_model=null,$("#master_lookup #year, #master_lookup #make","#master_lookup #model","#master_lookup #style").attr("disabled","disabled"),$("#master_lookup #year").html('<option value="0">- Select Year -<\/option>'),$("#master_lookup #make").html('<option value="0">- Select Make -<\/option>'),$("#master_lookup #model").html('<option value="0">- Select Model -<\/option>'),$("#master_lookup #style").html('<option value="0">- Select Style -<\/option>'),master_mount=$(this).val(),master_mount!==0&&master_mount!==null&&$("#master_lookup #mount").removeClass("err"),$.getJSON("https://api.curtmfg.com/v2/getyear?callback=?",{mount:master_mount,dataType:"JSONP"},function(n){$.each(n,function(n,t){var i=document.createElement("option");$(i).text(t),$("#master_lookup #year").append(i)}),$("#master_lookup label[for=mount]").hide(),$("#master_lookup label[for=year]").show(),$("#master_lookup #year").removeAttr("disabled").focus(),$("#master_lookup label img").css("display","none")})}),$("#master_lookup #year").change(function(){$("#master_lookup label img").css("display","none"),master_make=master_model=null,$("#master_lookup #make","#master_lookup #model","#master_lookup #style").attr("disabled","disabled"),$("#master_lookup #make").html('<option value="0">- Select Make -<\/option>'),$("#master_lookup #model").html('<option value="0">- Select Model -<\/option>'),$("#master_lookup #style").html('<option value="0">- Select Style -<\/option>'),master_year=$(this).val(),master_year!==0&&master_year!==null&&$("#master_lookup #year").removeClass("err").next().next().hide(),$.getJSON("https://api.curtmfg.com/v2/getmake?callback=?",{mount:master_mount,year:master_year,dataType:"JSONP"},function(n){$.each(n,function(n,t){var i=document.createElement("option");$(i).text($.trim(t)),$("#master_lookup #make").append(i)}),$("#master_lookup label[for=year]").hide(),$("#master_lookup label[for=make]").show(),$("#master_lookup #make").removeAttr("disabled").focus(),$("#master_lookup label img").css("display","none")})}),$("#master_lookup #make").change(function(){$("#master_lookup label img").css("display","none"),master_model=null,$("#master_lookup #model","#master_lookup #style").attr("disabled","disabled"),$("#master_lookup #model").html('<option value="0">- Select Model -<\/option>'),$("#master_lookup #style").html('<option value="0">- Select Style -<\/option>'),master_make=$(this).val(),master_make!==0&&master_make!==null&&$("#master_lookup #make").removeClass("err").next().next().hide(),$.getJSON("https://api.curtmfg.com/v2/getmodel?callback=?",{mount:master_mount,year:master_year,make:master_make,dataType:"JSONP"},function(n){$.each(n,function(n,t){var i=document.createElement("option");$(i).text($.trim(t)),$("#master_lookup #model").append(i)}),$("#master_lookup label[for=make]").hide(),$("#master_lookup label[for=model]").show(),$("#master_lookup #model").removeAttr("disabled").focus(),$("#master_lookup label img").css("display","none")})}),$("#master_lookup #model").change(function(){$("#master_lookup label img").css("display","none"),$("#master_lookup #style").attr("disabled","disabled"),$("#master_lookup #style").html('<option value="0">- Select Style -<\/option>'),master_model=$(this).val(),master_model!==0&&master_model!==null&&$("#master_lookup #model").removeClass("err").next().next().hide(),$.getJSON("https://api.curtmfg.com/v2/getstyle?callback=?",{mount:master_mount,year:master_year,make:master_make,model:master_model,dataType:"JSONP"},function(n){$.each(n,function(n,t){var i=document.createElement("option");$(i).text($.trim(t)),$("#master_lookup #style").append(i)}),$("#master_lookup label[for=model]").hide(),$("#master_lookup label[for=style]").show(),$("#master_lookup #style").removeAttr("disabled").focus(),$("#master_lookup label img").css("display","none")})}),$("#master_lookup #style").change(function(){$("#master_lookup input[type=submit]").removeAttr("disabled").focus(),master_style=$(this).val(),master_style!==0&&master_style!==null&&$("#master_lookup #style").removeClass("err").next().next().hide()}),$("#master_lookup input[type=submit]").click(function(n){n.preventDefault(),master_style=$("#master_lookup #style").val();var t=!0;master_year===0||master_year===null?(t=!1,$("#master_lookup #year").addClass("err").next().next().css("display","block")):$("#master_lookup #year").removeClass("err").next().next().hide(),master_make===0||master_make===null?(t=!1,$("#master_lookup #make").addClass("err").next().next().css("display","block")):$("#master_lookup #make").removeClass("err").next().next().hide(),master_model===0||master_model===null?(t=!1,$("#master_lookup #model").addClass("err").next().next().css("display","block")):$("#master_lookup #model").removeClass("err").next().hide(),master_style===0||master_style===null?(t=!1,$("#master_lookup #style").addClass("err").next().next().css("display","block")):$("#master_lookup #style").removeClass("err").next().hide(),t?window.location.href=window.location.protocol+"//"+window.location.host+"/Lookup/"+encodeURIComponent(master_year)+"/"+encodeURIComponent(master_make)+"/"+encodeURIComponent(master_model)+"/"+encodeURIComponent(master_style.replace(/\//g,"!")):displayError("There was an error while processing your request")}),$("#master_lookup #year").val()>0&&$("#master_lookup #year").change(),$(".error_display .close").live("click",function(){closeError()}),t=document.createElement("script"),t.type="text/javascript",t.async=!0,t.src="https://apis.google.com/js/plusone.js",i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(t,i),(window.sidebar||window.external&&$.browser.webkit!=!0||window.opera&&window.print)&&(r='<a href="javascript:void(0)" title="Bookmark Us" class="bookmark">Bookmark Us<\/a>',$("div.sub_menu_container span.phone").before(r),$(".bookmark").live("click",function(){addFavorite()})),$.extend($.modal.defaults,{closeClass:"modalClose",closeHTML:"<a href='javascript:void(0)'>Close<span>x<\/span><\/a>",opacity:80,onOpen:function(n){n.overlay.fadeIn("400",function(){n.data.hide(),n.container.fadeIn("400",function(){n.data.slideDown("fast"),modelClosingAction=null})})},onClose:function(n){n.data.fadeOut("400",function(){n.container.hide("400",function(){n.overlay.slideUp("fast",function(){$.modal.close()})})})},overlayClose:!0}),$("a.email-share").click(function(n){n.preventDefault();var t=$(this);return $.get($(t).attr("href")+"&layout=false",function(n){$(t).attr("href").indexOf("part")!==-1?$.modal(n,{containerCss:{backgroundColor:"#ffffff",borderColor:"#ffffff",height:"700px",width:"800px",padding:"10px"},onClose:function(n){n.data.fadeOut("400",function(){n.container.hide("400",function(){n.overlay.slideUp("fase",function(){$.modal.close()})})})}}):$.modal(n,{containerCss:{backgroundColor:"#ffffff",borderColor:"#ffffff",height:"700px",width:"500px",padding:"10px"},onClose:function(n){modelClosingAction==="showThanks"?($("#simplemodal-overlay").remove(),$("#simplemodal-container").remove(),showThanks()):n.data.fadeOut("400",function(){n.container.hide("400",function(){n.overlay.slideUp("fase",function(){$.modal.close()})})})}}),$("form.share-form input[type=submit]").css("display","inline-block").after('<a href="javascript:$.modal.close()" title="Close" style="margin-left:10px;vertical-align:bottom;">Close<\/a>'),$("form.share-form input[type=submit]").live("click",function(n){$("#simplemodal-container").find("span.error").remove(),n.preventDefault();var i,t;t={},i=$("form.share-form").attr("action"),t.recipient=$("#recipient").val(),t.sender=$("#sender").val(),t.subj=$("#subj").val(),t.msg=$("#msg").val(),t.ajax=!0,$.post(i,t,function(n){n.length>0?$("span.share-heading").after('<span class="share-heading error" style="color:red;font-size:13px;font-weight:bold">'+n+"<\/span>"):(modelClosingAction="showThanks",$.modal.close())})})}),!1});$(document).on("click","form.simple-form input[type=submit]",function(){return validateForm($(this).closest(".simple-form"))});$(document).on("change keyup","form.simple-form input,form.simple-form textarea,form.simple-form select",function(){validateForm($(this).closest(".simple-form"))});$("ul.tabs").not("ul.nojs").find("li a:first").addClass("active"),$("div.tab_container div.tab_content").hide(),$("div.tab_container div.tab_content:first").addClass("active");$(document).on("click","a.add_cart",function(n){n.preventDefault();var t=$(this).data("id"),u=$("#"+t).find("h4").html(),i=Number($("#"+t).find("span.price").html().replace("$","")),r=!1;$(cartItems).each(function(n,u){u.partID==t&&(u.qty+=1,u.price=u.qty*i,r=!0)}),r||cartItems.push(new CartItem(t,1,i,u,!1)),updateCart(),showCart(),startCartTimer(),$.getJSON("/Cart/AddAjax",{id:t,qty:1,ts:getTimestamp()},function(){populateCart()})});$(document).on("click","#cartbox table a.remove",function(n){n.preventDefault();var t=$(this).data("id"),i=$(this).parent().parent().get(0);$(cartItems).each(function(n,i){i.partID==t&&cartItems.splice(n,1)}),cartItems.length>0?$(i).fadeOut("fast",function(){$.getJSON("/Cart/RemoveAjax",{id:t,ts:getTimestamp()},populateCart)}):($("#cartbox").empty(),$("#cartbox").append('<p style="display: none;">There are no items in your cart. You should add something.<\/p>'),$("#cartbox p").fadeIn("fast",function(){$.getJSON("/Cart/RemoveAjax",{id:t,ts:getTimestamp()},populateCart)}))});$("#partAddToCart").submit(function(n){var r;n.preventDefault();var i=$(this).data("id"),f=$("#mid_col").find("span.shortDesc").html(),u=Number($("#qty").val()),t=$("#mid_col").find("span.price").html().replace("$","");t=Number(t),r=!1,$(cartItems).each(function(n,f){f.partID==i&&(f.qty+=u,f.price=f.qty*t,r=!0)}),r||cartItems.push(new CartItem(i,u,t,f,!1)),updateCart(),showCart(),startCartTimer(),$.getJSON("/Cart/AddAjax",{id:i,qty:$("#qty").val(),ts:getTimestamp()},function(){populateCart()})}),getTimestamp=function(){var n=new Date;return n.getDay().toString()+n.getMonth().toString()+n.getYear().toString()+n.getHours().toString()+n.getMinutes().toString()+n.getSeconds().toString()+n.getMilliseconds().toString()+n.getTimezoneOffset().toString()},$("#cartlink, #cartbox").hover(function(){cartHovered=!0,showCart()},function(){cartHovered=!1,startCartTimer(300)}),populateCart(),$(window).bind("hashchange",function(){var n=$.param,t=n.fragment();changeTab(t)}),$(window).trigger("hashchange"),u=new Image,u.src="/Content/img/large-loader.gif"});
//@ sourceMappingURL=global.min.js.map