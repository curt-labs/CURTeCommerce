var map,markers,locations,infoWindow,geocoder,directionsDisplay,directionsService;$(function(){var r=function(){var r=$("#mid_col").width(),u=$("#mid_col").height(),n,t,i;$("#mid_col").css("position","relative"),n=document.createElement("div"),$(n).addClass("loader").css("background","white").css("z-index","2000").css("position","absolute").css("top","0").css("left","0").css("height",u).css("width",r).css("opacity","0.8").css("text-align","center"),t=document.createElement("img"),$(t).attr("src","/Content/img/159.gif").css("width","175px").css("display","block").css("margin","60px auto 10px auto"),$(n).append(t),i=document.createElement("span"),$(i).css("font-size","22px").text("Calculating your location..."),$(n).append(i),$("#mid_col").append(n)},u=function(){$("div.loader").fadeOut(400,function(){$(this).remove()})},n=function(n,t,i){var r={center:new google.maps.LatLng(n,t),zoom:i,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map"),r),$("#map").show(),directionsDisplay.setMap(map),f()},f=function(){for(markers=[],infoWindows=[],i=0;i<locations.length;i++){var n=new google.maps.Marker({position:new google.maps.LatLng(locations[i].latitude,locations[i].longitude),map:map,title:locations[i].name,animation:google.maps.Animation.DROP});markers[i]=n,google.maps.event.addListener(n,"click",function(){infoWindow&&infoWindow.close();var n=$.inArray(this,markers);infoWindow=new google.maps.InfoWindow({content:t(n)}),infoWindow.open(map,markers[n])})}},t=function(n){var i=locations[n],t;return i!=undefined&&(t='<div class="infoWindow">',t+='<span class="title">'+i.name+"<\/span>",t+='<span class="directions_easy" data-address="'+i.address+" "+i.city+","+i.state+'"  data-lat="'+i.latitude+'" data-long="'+i.longitude+'">',t+='<img src="/Content/img/directions.jpg" alt="Get Directions" />',t+="Get Directions<\/span>",i.phone!=undefined&&(t+="<span>",t+='<img src="/Content/img/phone-icon.png" alt="Phone: '+i.phone+'">',t+="Phone: "+i.phone,t+="<\/span>"),i.fax!=undefined&&(t+="<span>",t+='<img src="/Content/img/Fax.png" alt="Fax: '+i.fax+'">',t+="Fax: "+i.fax,t+="<\/span>"),i.email!=undefined&&(t+='<span class="send_email" data-email="'+i.email+'">',t+='<img src="/Content/img/footer/mail.png" alt="E-Mail: '+i.email+'">',t+="E-Mail: "+i.email,t+="<\/span>"),t+="<\/div>"),t},e=function(t){r(),$.post("/Locations/GetNearest",{lat:t.coords.latitude,lon:t.coords.longitude},function(t){t.length==0?n(locations[0].latitude,locations[0].longitude,4):$.each(t,function(n,t){var i=$("#"+t.locationID).clone().wrap("<div>").parent().html();$("#"+t.locationID).remove(),n===0&&(map.panTo(new google.maps.LatLng(t.latitude,t.longitude)),u(),map.setZoom(9)),$(".location").last().after(i.toString()).show()})},"json")},o=function(n){$.getJSON("/GlobalFunctions/GetCountries",function(t){if(t!==undefined&&t.length>0){var i;i='<link href="/Content/css/share-email.css" media="all" rel="stylesheet" />',i+='<span class="share-heading">Enter your address for a start location.<\/span>',i+='<form class="share-form">',i+='<input type="hidden" id="destination" value="'+n+'" />',i+='<label for="addr">Address',i+='<input type="text" id="directAddr" placeholder="Enter your address..." /><\/label>',i+='<label for="city">City',i+='<input type="text" id="city" placeholder="Enter your city..." /><\/label>',i+='<label for="state">State',i+='<select id="state">',$.each(t,function(n,t){i+='<optgroup label="'+t.name+'">',$.each(t.states,function(n,t){i+='<option value="'+t.abbr+'">'+t.state+"<\/option>"}),i+="<\/optgroup>"}),i+="<\/select>",i+="<\/label>",i+='<div class="clearfix"><\/div>',i+='<input type="submit" id="getDirections" value="Get Directions" style="display:inline-block" />',i+='<a href="javascript:$.modal.close()" title="Close" style="margin-left:10px;vertical-align:bottom;">Close<\/a>',i+="<\/form>",$.modal(i,{containerCss:{backgroundColor:"#ffffff",borderColor:"#ffffff",height:"500px",width:"400px",padding:"10px"},onClose:function(n){n.data.fadeOut("400",function(){n.container.hide("400",function(){n.overlay.slideUp("fase",function(){$.modal.close()})})})}})}})};$(".delete").click(function(){return confirm("Are you sure you want to delete this location?")?!0:!1}),$(".map_easy").live("click",function(){var r,u,f,n;for(r=$(this).data("lat"),u=$(this).data("long"),f=$(this).data("id"),map.panTo(new google.maps.LatLng(r,u)),i=0;i<locations.length;i++)if(locations[i].locationID===f){n=$.inArray(locations[i],locations);break}infoWindow&&infoWindow.close(),infoWindow=new google.maps.InfoWindow({content:t(n)}),infoWindow.open(map,markers[n])}),$(".map_tough").live("click",function(){var n;n=$(this).data("address"),geocoder.geocode({address:n},function(n,t){t===google.maps.GeocoderStatus.OK?map.panTo(n[0].geometry.location):displayError("There was an error while processing your request.")})}),$(".directions_easy").live("click",function(){var n=$(this).data("address");o(n)}),$("span.send_email").live("click",function(n){n.preventDefault();var t=$(this).attr("data-email"),i=$("#content-container").html();return $.modal(i,{containerCss:{backgroundColor:"#ffffff",borderColor:"#ffffff",height:"800px",width:"550px",padding:"10px"},onClose:function(n){modelClosingAction==="showThanks"?($("#simplemodal-overlay").remove(),$("#simplemodal-container").remove(),showThanks()):n.data.fadeOut("400",function(){n.container.hide("400",function(){n.overlay.slideUp("fase",function(){$.modal.close()})})})}}),$("div.simplemodal-container form.simple-form input#to").val(t),$("div.simplemodal-container form.simple-form input[type=submit]").css("display","inline-block").after('<a href="javascript:$.modal.close()" title="Close" style="margin-left:10px;vertical-align:bottom;">Close<\/a>'),!1}),locations=$.parseJSON($("#json").val()),Modernizr.geolocation&&navigator.geolocation.getCurrentPosition(e),directionsDisplay=new google.maps.DirectionsRenderer,n("38","-97",4),geocoder=new google.maps.Geocoder});
//@ sourceMappingURL=locations.min.js.map