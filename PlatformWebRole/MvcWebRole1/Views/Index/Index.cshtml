@{
    ViewBag.Title = "Index";

    List<EcommercePlatform.Models.APIPart> recentParts = ViewBag.recentParts;
    if(recentParts == null){
        recentParts = new List<EcommercePlatform.Models.APIPart>();
    }

    List<EcommercePlatform.Models.APICategory> parent_cats = ViewBag.parent_cats;
    if(parent_cats == null){
        parent_cats = new List<EcommercePlatform.Models.APICategory>();
    }

    EcommercePlatform.ContentPage page = ViewBag.page;
    if(page == null){
        page = new EcommercePlatform.ContentPage();   
    }

    List<EcommercePlatform.Banner> banners = ViewBag.banners;
    if (banners == null) {
        banners = new List<EcommercePlatform.Banner>();
    }

    EcommercePlatform.Customer customer = ViewBag.customer;
    if (customer == null) {
        customer = new EcommercePlatform.Customer();
    }

    string titletag = page.metaTitle ?? ViewBag.settings.Get("SiteTitle");

    Layout = null;
}
<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <!-- Use the .htaccess and remove these lines to avoid edge case issues.
           More info: h5bp.com/b/378 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>@ViewBag.settings.Get("SiteName")@((String.IsNullOrEmpty(titletag)) ? "" : " | " + titletag)</title>

    <meta name="description" content="@ViewBag.settings.Get("SiteDescription")">
    <meta name="author" content="CURT Manufacturing, LLC. Copyright @DateTime.Now">

    <link rel="Shortcut Icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/favicon.ico" />
    <link rel="apple-touch-icon-precompressed" href="/favicon.ico" />
    <link href='https://fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Alegreya:400,700,900' rel='stylesheet' type='text/css'>

    <link href="/Content/site.css" rel="stylesheet" type="text/css" />
    <link href="/Content/view_sass/home_page.css" rel="stylesheet" type="text/css" />
    <!--[if lt IE 9]>
        <link href="/Content/view_sass/ie8.css" rel="stylesheet" type="text/css" />
    <![endif]-->
    <!-- Mobile viewport optimized: j.mp/bplateviewport -->
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
    <script src="//ajax.aspnetcdn.com/ajax/jquery/jquery-1.7.min.js" type="text/javascript"></script>
    <script type="text/javascript">        window.jQuery || document.write('<script src="/Scripts/jquery-1.7.min.js"><\/script>')</script>
    <!-- All JavaScript at the bottom, except this Modernizr build incl. Respond.js
           Respond is a polyfill for min/max-width media queries. Modernizr enables HTML5 elements & feature detects; 
           for optimal performance, create your own custom Modernizr build: www.modernizr.com/download/ -->
    <script src="@Url.Content("~/Scripts/modernizr.js")" type="text/javascript"></script>
    @if (ViewBag.Settings.Get("GoogleAnalyticsCode") != "") {
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', '@ViewBag.Settings.Get("GoogleAnalyticsCode")']);
        _gaq.push(['_trackPageview']);
    </script>
    }
    <meta charset="utf-8" />
</head>
<body>
    <header>
        <div id="top_bar">
            <nav>
                <a href="/" id="scroll_logo" title="@ViewBag.settings.Get("SiteName")">
                    <img src="@ViewBag.settings.Get("HeaderLogoScroll")" alt="@ViewBag.settings.Get("SiteName")" />
                </a>
                <span class="phone">Call Us: <span>@ViewBag.settings.Get("PhoneNumber")</span></span>
                <ul>
                    <li>
                        <a href="/Categories" title="Shop">Shop</a>
                    </li>
                    <li>
                        <a href="/info" title="Hitches 101">Hitches 101</a>
                    </li>
                    <li>
                        <a href="/faq" title="Frequently Asked Questions">FAQ</a>
                    </li>
                    <li>
                        <a href="/Locations" title="Locations">Locations</a>
                    </li>
                    <li>
                        <a href="/Contact" title="Contact Us">Contact Us</a>
                    </li>
                </ul>
                <div class="error_display">
                    <span class="error_heading">
                        Error:
                        <span class="err"></span>
                        <span class="close">X</span>
                    </span>
                </div>
            </nav>
            <div class="sub_menu">
                <div class="sub_menu_container">
                    <form method="get" action="/Search" class="search">
                        <input type="search" name="search" class="placeholder" id="mini-search" placeholder="Search for Product">
                        <input type="submit" id="btnSearch" value="" />
                    </form>
                    <a href="/" title="Home" class="sub_link">Home</a>
                    @if (customer != null && customer.ID > 0) {
                        <a href="/Account" title="Access Your Account" class="sub_link">My Account</a>
                    } else {
                        <a href="/Authenticate" title="Login to Your Account" class="sub_link">Login</a>
                    }
                    @if (customer.Cart != null && customer.Cart.CartItems != null) {
                        <a href="/Cart" id="cartlink" title="View Cart" class="sub_link">View Cart ( <span id="cartCount">@customer.Cart.getCount()</span> )</a>
                    }
                    @if (customer != null && customer.ID > 0) {
                        <a href="/Authenticate/Logout" title="Log Out of your Account" class="sub_link">Log Out</a>
                    }
                </div>
            </div>
        </div>
        <div class="sub_bar">
            <a href="/" class="logo" title="@ViewBag.settings.Get("SiteName")">
                <img src="@ViewBag.settings.Get("HeaderLogo")" alt="@ViewBag.settings.Get("SiteName")" />
            </a>
            <div style="clear:both"></div>
            <form method="get" action="/Search" id="search_box">
                <input type="submit" id="btnSearch" value="" />
                <label for="search">
                    PRODUCT SEARCH
                    <span>Find What You're Looking For</span>
                </label>
                <input type="search" name="search" id="search" class="placeholder" placeholder="Search for Product">
                
            </form>
            @if (!String.IsNullOrEmpty(ViewBag.settings.Get("HomeBannerTop"))) {
                <img src="@ViewBag.settings.Get("HomeBannerTop")" alt="alt="@ViewBag.settings.Get("HomeBannerTopAltText")"" class="call_us" />
            }
            <div style="clear:both"></div>
        </div>
    </header>

    <div id="container">
        <div id="main" role="main">
            <form id="lookup" action="/Lookup" method="post">
                <span class="title">FIND MY HITCH</span>
                <span class="sub_title">Get the right hitch for your vehicle</span>
                <label for="mount">
                    <span>* You must select a mount.</span>
                    <select name="mount" id="mount">
                        <option value="">- Select Mount -</option>
                        <option value="front">Front Mount</option>
                        <option value="rear">Rear Mount</option>
                    </select>
                    <img src="/Content/img/ajax-loader.gif" alt="Loading.." />
                </label>
                
                <label for="year">
                    <span>* You must select a year.</span>
                    <select name="year" id="year">
                        <option value="0">- Select Year -</option>
                    </select>
                    <img src="/Content/img/ajax-loader.gif" alt="Loading.." />
                </label>

                <label for="make">
                    <span>* You must select a make.</span>
                    <select name="make" id="make">
                        <option value="0">- Select Make -</option>
                    </select>
                    <img src="/Content/img/ajax-loader.gif" alt="Loading.." />
                </label>
    
                <label for="model">
                    <span>* You must select a model.</span>
                    <select name="model" id="model">
                        <option value="0">- Select Model -</option>
                    </select>
                    <img src="/Content/img/ajax-loader.gif" alt="Loading.." />
                </label>
    
                <label for="style">
                    <span>* You must select a style.</span>
                    <select name="style" id="style">
                        <option value="0">- Select Style -</option>
                    </select>
                    <img src="/Content/img/ajax-loader.gif" alt="Loading.." />
                </label>
                <input type="submit" name="btnSubmit" id="btnSubmit" value="Fit Vehicle" />
                <a href="javascript:void(0)" id="reset_lookup" title="Reset Fields">Reset</a>
            </form>
            <div id="curt_product">
                @foreach (EcommercePlatform.Banner banner in banners) {
                    <div class="banner">
                        <img src="@banner.image" alt="@banner.title" />
                        <a href="@((banner.link != "") ? banner.link : "javascript:void(0);")" class="info">
                            <div class="info_desc">
                                <span class="heading">@banner.title</span>
                                <span class="info_sub">@banner.body</span>
                            </div>
                            <div class="arrow">
                                <span>></span>
                            </div>
                        </a>
                    </div>
                }
            </div>
            <div class="clearfix"></div>
            <section id="left_col">
                @if (parent_cats.Count > 0) {
                    <article class="module">
                        <span class="module_title">Browse Categories</span>
                        <ul>
                            @foreach (EcommercePlatform.Models.APICategory cat in parent_cats) {
                                <li>
                                    <a href="/Category/@cat.catID/@cat.catTitle" title="@cat.catTitle">@cat.catTitle</a>
                                </li>
                            }
                        </ul>
                    </article>
                }
                <article class="module" id="newsletter">
                    <span class="module_title">Newsletter</span>
                    <p class="desc">Receive The Latest NEWS, UPDATES, AND INFORMATION</p>
                    <p class="action">SIGN UP NOW!</p>
                    <form method="post" action="/Newsletter/Signup">
                        <input type="text" name="name" id="name" class="placeholder" placeholder="Enter Full Name" />
                        <input type="email" name="email" id="email" class="placeholder" placeholder="Enter Email Address" />
                        <input type="submit" name="btnSubmit" value="Sign Up" />
                        <div style="clear:both"></div>
                    </form>
                </article>
                @if (!String.IsNullOrEmpty(ViewBag.settings.Get("HomeBannerLeft"))) {
                    <img src="@ViewBag.settings.Get("HomeBannerLeft")" alt="@ViewBag.settings.Get("HomeBannerLeftAltText")" class="free-shipping" />
                }
            </section>
            <section id="home_content">
                @Html.Raw(page.content)
            </section>
            <section id="mid_col" @((recentParts.Count == 0) ? "style=width:790px" : "")>
                <span class="heading">FEATURED PRODUCTS</span>
                @foreach (EcommercePlatform.Models.APICategory cat in parent_cats) {
                    <article>
                        <img src="@cat.image" alt="@cat.catTitle.Trim()" />
                        <ul>
                            <li>
                                <a href="/Category/@cat.catID/@cat.catTitle.Trim()">@cat.catTitle.Trim()</a>
                            </li>
                            @if (cat.sub_categories.Count > 3) {
                                for (int i = 0; i < 3; i++) {
                                    <li>
                                        <a href="/Category/@cat.sub_categories[i].catID/@cat.sub_categories[i].catTitle.Trim()">@cat.sub_categories[i].catTitle.Trim()</a>
                                    </li>
                                }
                                <li>
                                    <a href="/Category/@cat.catID/@cat.catTitle">More..</a>
                                </li>
                            } else {
                                foreach (EcommercePlatform.Models.APICategory sub in cat.sub_categories) {
                                    <li>
                                        <a href="/Category/@sub.catID/@sub.catTitle.Trim()">@sub.catTitle.Trim()</a>
                                    </li>
                                }
                            }
                        </ul>
                    </article>
                }
            </section>
            <section id="right_col">
                @if (recentParts.Count > 0) {
                    <article class="module" style="height:300px">
                        <span class="module_title">Recent Parts</span>
                        <ul>
                            @foreach (EcommercePlatform.Models.APIPart part in recentParts) {
                                <li>
                                    <a href="/Part/@part.partID" title="View Part #@part.partID">@part.shortDesc</a>
                                </li>
                            }
                        </ul>
                    </article>
                }
            </section>
            <div class="clearfix"></div>
        </div>
    </div>

    <footer>
        <div id="footer_container">
            <div class="footerlogo">
                @if (!String.IsNullOrEmpty(ViewBag.settings.Get("HeaderLogoScroll"))) {
                    <img src="@ViewBag.settings.Get("HeaderLogoScroll")" alt="@ViewBag.settings.Get("SiteName")" />
                }
                <span class="copy">&copy; @DateTime.Now.Year @ViewBag.settings.Get("SiteName"). All Rights Reserved.</span>
                <div class="social_links">
                    @if (!String.IsNullOrEmpty(ViewBag.settings.Get("FacebookPageURL"))) {
                        <a href="@ViewBag.settings.Get("FacebookPageURL")" title="@ViewBag.settings.Get("SiteName") on Facebook">
                            <img src="/Content/img/footer/facebook_dark.png" alt="@ViewBag.settings.Get("SiteName") on Facebook" class="dark fb" />
                            <img src="/Content/img/footer/facebook_active.png" alt="@ViewBag.settings.Get("SiteName") on Facebook" class="active fb" />
                        </a>
                    }
                    @if (!String.IsNullOrEmpty(ViewBag.settings.Get("TwitterPageURL"))) {
                        <a href="@ViewBag.settings.Get("TwitterPageURL")" title="@ViewBag.settings.Get("SiteName") on Twitter">
                            <img src="/Content/img/footer/twitter_dark.png" alt="@ViewBag.settings.Get("SiteName") on Twitter" class="dark tweet" />
                            <img src="/Content/img/footer/twitter_active.png" alt="@ViewBag.settings.Get("SiteName") on Twitter" class="active tweet" />
                        </a>
                    }
                    @if (!String.IsNullOrEmpty(ViewBag.settings.Get("YouTubePageURL"))) {
                        <a href="@ViewBag.settings.Get("YouTubePageURL")" title="@ViewBag.settings.Get("SiteName") on YouTube">
                            <img src="/Content/img/footer/youtube_dark.png" alt="@ViewBag.settings.Get("SiteName") on YouTube" class="dark yt" />
                            <img src="/Content/img/footer/youtube_active.png" alt="@ViewBag.settings.Get("SiteName") on YouTube" class="active yt" />
                        </a>
                    }
                    ​<a href="/Share/Index?type=site" title="Share via E-Mail" class="email-share">
                        <img src="/Content/img/footer/mail.png" alt="Share via E-Mail">
                    </a>
                </div>
            </div>
            <div class="link_box">
                <a href="/About Us">About Us</a>
                <a href="/Blog">Blog</a>
                <a href="/Testimonials">Testimonials</a>
                <a href="/Locations" title="Locations">Locations</a>
                <a href="/page/Orders - Changes, Cancellations, and Transit Times">Orders - Changes, Cancellations, and Transit Times</a>
                <a href="/Contact" title="Contact Us">Contact Us</a>
            </div>

            <div class="link_box">
                <a href="/FAQ">FAQ</a>
                <a href="/page/Returns">Returns</a>
                <a href="/page/Warranty">Warranties</a>
                <a href="/page/PrivacyPolicy">Privacy Policy</a>
                <a href="#">Sitemap</a>
            </div>

            <div class="company">
                @if (!String.IsNullOrEmpty(ViewBag.settings.Get("PhoneNumber"))) {
                    <span>CALL US WITH QUESTIONS: @ViewBag.settings.Get("PhoneNumber")</span>
                }
                <div class="footer_graphics">
                    <img src="/Content/img/footer/amex.png" alt="American Express" />
                    <img src="/Content/img/footer/mastercard.png" alt="Mastercard" />
                    <img src="/Content/img/footer/visa.png" alt="Visa" />
                    <img src="/Content/img/footer/discover.png" alt="Discover Card" />
                    <img src="/Content/img/footer/google_checkout.png" alt="Google Checkout" />
                    <img src="/Content/img/footer/paypal.png" alt="PayPal" />
                    <br />
                    <a href="http://www.authorize.net/" title="Authorize.Net Verified Merchant" target="_blank">
                        <img src="/Content/img/footer/authorize.gif" alt="Authorize.Net Verified Merchant" class="authorize" />
                    </a>
                    <a href="http://www.sema.org/" title="SEMA Specialty Equipment Market Association" target="_blank">
                        <img src="/Content/img/footer/sema.png" alt="SEMA Show" class="sema" />
                    </a>

                </div>
                <a href="http://www.curtmfg.com/" class="curtlogo" target="_blank"><img src="/Content/img/curt.jpg" alt="CURT Manufacturing - The FIRST Name in Towing Products" /></a>
            </div>
        </div>
        <div class="clearfix"></div>
    </footer>
    <!--! end of #container -->
    <!-- JavaScript at the bottom for fast page loading -->
    <!-- scripts concatenated and minified via build script -->
    @*if (HttpContext.Current.IsDebuggingEnabled) {*@
        <script defer src="/Scripts/custom/plugins.js" type="text/javascript"></script>
        <script defer src="/Scripts/custom/global.js" type="text/javascript"></script>
        <script src="/Scripts/custom/homepage.js" type="text/javascript"></script>
    @*} else {
        <script defer src="/Scripts/custom/plugins.min.js" type="text/javascript"></script>
        <script defer src="/Scripts/custom/global.min.js" type="text/javascript"></script>
        <script src="/Scripts/custom/homepage.min.js" type="text/javascript"></script>
    }*@
    <script src="/Scripts/tools/jquery.simplemodal.min.js" type="text/javascript"></script>
    <script src="/Scripts/tools/jquery.bbq.min.js" type="text/javascript"></script>
    <script src="/Scripts/tools/jquery.cycle.js" type="text/javascript"></script>
    <!-- jsErrLog script -->
    <script type="text/javascript" src="//jserrlog.appspot.com/jserrlog-min.js"></script>
    <!-- end scripts -->
    @if (ViewBag.Settings.Get("GoogleAnalyticsCode") != "") {
    <script type="text/javascript">
        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>
    }
    <!-- Prompt IE 6 users to install Chrome Frame. Remove this if you want to support IE 6.
       chromium.org/developers/how-tos/chrome-frame-getting-started -->
    <!--[if lt IE 7 ]>
    <script defer src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
    <script defer>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
  <![endif]-->
    
</body>
</html>
